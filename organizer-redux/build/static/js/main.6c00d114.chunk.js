(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,n){e.exports=n(53)},41:function(e,t,n){},44:function(e,t,n){},51:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(27),l=n.n(o),i=(n(41),n(5)),s=n(6),c=n(9),u=n(7),d=n(8),m=(n(44),n(11)),h=n(10),p=n(35),E=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,null,[{key:"removeUser",value:function(){window.localStorage.removeItem("user")}},{key:"authenticateUser",value:function(e){window.localStorage.setItem("token",e)}},{key:"isUserAuthenticated",value:function(){return null!==window.localStorage.getItem("token")}},{key:"deauthenticateUser",value:function(){window.localStorage.removeItem("token")}},{key:"getToken",value:function(){return window.localStorage.getItem("token")}}]),e}(),f=function(e){var t=e.component,n=Object(p.a)(e,["component"]);return r.a.createElement(h.d,Object.assign({},n,{render:function(e){return E.isUserAuthenticated()?r.a.createElement(t,e):r.a.createElement(h.c,{to:{pathname:"/users/login",state:{from:e.location}}})}}))},b=function(e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h1",null,"Home Page")))},g=function(e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h1",null,"About Page")))},v=n(14),S=n(3),O=function(e){var t=e.type||"text";return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:e.name},e.placeholder),r.a.createElement("input",{type:t,className:"form-control",name:e.name,placeholder:e.placeholder,value:e.value,onChange:e.onChange}))},C=function(e){return r.a.createElement("div",null,r.a.createElement("input",{className:"btn btn-primary",type:"submit",value:e.value,onClick:e.onClick}))},j=function(e){return r.a.createElement("form",null,r.a.createElement("div",null,e.error),r.a.createElement(O,{name:"username",placeholder:"Username",value:e.username,onChange:e.onChange}),r.a.createElement(O,{type:"password",name:"password",placeholder:"Password",value:e.password,onChange:e.onChange}),r.a.createElement("br",null),r.a.createElement(C,{value:"Login",onClick:e.onSubmit}))},y=n(16),T=n.n(y),I=function(){var e="https://baas.kinvey.com/",t="kid_H1L5OCFUW",n="338746648e3b4bfa8e83a8ac221a1acc";function a(a,r,o,l){return{url:e+r+"/"+t+"/"+o,method:a,headers:{Authorization:function(e){if("basic"===e)return"Basic ".concat(btoa(t+":"+n));var a=E.getToken();return"Kinvey ".concat(a)}(l),"Content-Type":"application/json"}}}return{get:function(e,t,n){return T.a.ajax(a("GET",e,t,n))},post:function(e,t,n,r){var o=a("POST",e,t,n);return r&&(o.data=JSON.stringify(r)),T.a.ajax(o)},update:function(e,t,n,r){var o=a("PUT",e,t,n);return o.data=JSON.stringify(r),T.a.ajax(o)},remove:function(e,t,n){return T.a.ajax(a("DELETE",e,t,n))},handleError:function(e){return e.responseJSON.description}}}(),k=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,null,[{key:"register",value:function(e,t){return I.post("user","","basic",{username:e,password:t})}},{key:"login",value:function(e,t){return I.post("user","login","basic",{username:e,password:t})}},{key:"logout",value:function(){return I.post("user","_logout","kinvey")}}]),e}(),_={LOGGIN_SUCCESS:"LOGGIN_SUCCESS",LOGOUT_SUCCESS:"LOGOUT_SUCCESS",AUTH_ERROR:"AUTH_ERROR",AUTH_REQUEST:"AUTH_REQUEST",REMOTE_ERROR:"REMOTE_ERROR",LIST_CREATED:"LIST_CREATED",LIST_UPDATED:"LIST_UPDATED",LIST_DELETED:"LIST_DELETED",FETCH_LISTS_SUCCESS:"FETCH_LISTS_SUCCESS",FIND_ONE_BY_ID:"FIND_ONE_BY_ID"};function w(){return{type:_.LOGGIN_SUCCESS}}function L(e){return{type:_.AUTH_ERROR,message:e}}function H(){return function(e){return k.logout().then(function(t){E.deauthenticateUser(),e({type:_.LOGOUT_SUCCESS})}).catch(function(t){var n=I.handleError(t);e(L(n))})}}var U=n(12),D=n.n(U),A=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={username:"",password:"",error:""},n.onInputChangeHandler=n.onInputChangeHandler.bind(Object(S.a)(Object(S.a)(n))),n.onSubmitHandler=n.onSubmitHandler.bind(Object(S.a)(Object(S.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"onInputChangeHandler",value:function(e){this.setState(Object(v.a)({},e.target.name,e.target.value))}},{key:"onSubmitHandler",value:function(e){e.preventDefault(),this.isValidForm()&&this.props.login(this.state.username.toLowerCase(),this.state.password)}},{key:"componentWillReceiveProps",value:function(e){e.error&&D.a.error(e.error),e.loggedIn&&(D.a.success("User login successfull!"),this.props.history.push("/"))}},{key:"isValidForm",value:function(){var e=this.state.username,t=this.state.password,n=!0,a="";return""!==e&&""!==t||(a="All input fields are required!",n=!1),a&&this.setState({error:a}),n}},{key:"render",value:function(){return console.log("Login Page render"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4 offset-md-4"},r.a.createElement("h1",null,"Login"),r.a.createElement("p",null,"Please enter your username and password."),r.a.createElement(j,{username:this.state.username,password:this.state.password,error:this.state.error,onChange:this.onInputChangeHandler,onSubmit:this.onSubmitHandler})))}}]),t}(a.Component);var R=Object(m.b)(function(e){return{loggedIn:e.auth.loggedIn,error:e.auth.error}},function(e){return{login:function(t,n){return e(function(e,t){return function(n){return k.login(e,t).then(function(e){E.authenticateUser(e._kmd.authtoken),n(w())}).catch(function(e){var t=I.handleError(e);n(L(t))})}}(t,n))}}})(A),N=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.props.logout()}},{key:"componentWillReceiveProps",value:function(e){e.error&&D.a.error(e.error),e.loggedIn||this.props.history.push("/users/login")}},{key:"render",value:function(){return null}}]),t}(a.Component);var P=Object(m.b)(function(e){return{loggedIn:e.auth.loggedIn,error:e.auth.error}},function(e){return{logout:function(){return e(H())}}})(N),M=function(e){return r.a.createElement("form",null,r.a.createElement("div",null,e.error),r.a.createElement(O,{name:"username",placeholder:"Username",value:e.username,onChange:e.onChange}),r.a.createElement(O,{type:"password",name:"password",placeholder:"Password",value:e.password,onChange:e.onChange}),r.a.createElement(O,{type:"password",name:"repeat",placeholder:"Confirm  Password",value:e.confirmPassword,onChange:e.onChange}),r.a.createElement("br",null),r.a.createElement(C,{value:"Register",onClick:e.onSubmit}))},F=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={username:"",password:"",repeat:"",error:""},n.onInputChangeHandler=n.onInputChangeHandler.bind(Object(S.a)(Object(S.a)(n))),n.onSubmitHandler=n.onSubmitHandler.bind(Object(S.a)(Object(S.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"onInputChangeHandler",value:function(e){this.setState(Object(v.a)({},e.target.name,e.target.value))}},{key:"onSubmitHandler",value:function(e){e.preventDefault(),this.isValidForm()&&this.props.register(this.state.username.toLowerCase(),this.state.password)}},{key:"componentWillReceiveProps",value:function(e){e.error&&D.a.error(e.error),e.loggedIn&&(D.a.success("User registration successfull!"),this.props.history.push("/"))}},{key:"isValidForm",value:function(){var e=this.state.username,t=this.state.password,n=!0,a="";return""!==e&&""!==t||(a="All input fields are required!",n=!1),t!==this.state.repeat&&(a="Passwords missmatch!",n=!1),a&&this.setState({error:a}),n}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4 offset-md-4"},r.a.createElement("h1",null,"Register"),r.a.createElement("p",null,"Please fill in this form to create an account."),r.a.createElement(M,{username:this.state.username,password:this.state.password,repeat:this.state.repeat,error:this.state.error,onChange:this.onInputChangeHandler,onSubmit:this.onSubmitHandler})))}}]),t}(a.Component);var G=Object(m.b)(function(e){return{loggedIn:e.auth.loggedIn,error:e.auth.error}},function(e){return{register:function(t,n){return e(function(e,t){return function(n){return k.register(e,t).then(function(e){E.authenticateUser(e._kmd.authtoken),n(w())}).catch(function(e){var t=I.handleError(e);n(L(t))})}}(t,n))}}})(F),V=function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,null,[{key:"create",value:function(e){return I.post("appdata","lists","kinvey",e)}},{key:"edit",value:function(e,t){return I.update("appdata","lists"+"/".concat(e),"kinvey",t)}},{key:"delete",value:function(e){return I.remove("appdata","lists"+"/".concat(e),"kinvey")}},{key:"getAll",value:function(){return I.get("appdata","lists","kinvey")}},{key:"getById",value:function(e){return I.get("appdata","lists","kinvey")}}]),e}();function x(e){return{type:_.REMOTE_ERROR,message:e}}function B(e){return function(t){return V.create(e).then(function(e){t(function(e){return{type:_.LIST_CREATED,data:e}}(e))}).catch(function(e){var n=I.handleError(e);t(x(n))})}}function W(e,t){return function(n){return V.edit(e,t).then(function(e){n(function(e){return{type:_.LIST_UPDATED,data:e}}(e))}).catch(function(e){var t=I.handleError(e);n(x(t))})}}function J(e){return function(t){return V.delete(e).then(function(){t(function(e){return{type:_.LIST_DELETED,id:e}}(e))}).catch(function(e){var n=I.handleError(e);t(x(n))})}}function q(){return function(e){return V.getAll().then(function(t){e(function(e){return{type:_.FETCH_LISTS_SUCCESS,data:e}}(t))}).catch(function(t){var n=I.handleError(t);e(x(n))})}}n(51);var Q=function(e){return r.a.createElement("div",{className:"list-thumb"},r.a.createElement("h2",null,e.list.name),r.a.createElement("p",null,r.a.createElement("span",null,"Total:")," 6",r.a.createElement("br",null),r.a.createElement("span",null,"Today:")," 3",r.a.createElement("br",null),r.a.createElement("span",null,"Active:")," 2",r.a.createElement("br",null),r.a.createElement("span",null,"Completed:")," 1",r.a.createElement("br",null)),r.a.createElement("button",{onClick:function(t){return e.editHandler(t,e.list)}},"[Edit]"),r.a.createElement("button",{onClick:e.deleteHandler},"[Delete]"))},z=function(e){var t=e.data,n=Object.keys(t).map(function(n){return r.a.createElement(Q,{key:n,list:t[n],editHandler:e.editHandler})});return console.log("Render ShowAllLists"),r.a.createElement("div",null,n)},Y=function(e){return r.a.createElement("form",null,r.a.createElement("div",null,e.error),r.a.createElement(O,{name:"name",placeholder:"Name",value:e.name,onChange:e.onChange}),r.a.createElement("br",null),r.a.createElement(C,{value:"Submit",onClick:e.onSubmit}))},K=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={error:""},n.onSubmitHandler=n.onSubmitHandler.bind(Object(S.a)(Object(S.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"onSubmitHandler",value:function(e){e.preventDefault(),this.isValidForm()&&this.props.createList(this.props.list)}},{key:"isValidForm",value:function(){var e=!0,t="";return""===this.props.list.name&&(t="All input fields are required!",e=!1),t&&this.setState({error:t}),e}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement("h1",null,"Create List"),r.a.createElement(Y,{name:this.props.list.name,onChange:this.props.onChange,onSubmit:this.onSubmitHandler,error:this.state.error})))}}]),t}(a.Component),$=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={error:""},n.onSubmitHandler=n.onSubmitHandler.bind(Object(S.a)(Object(S.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"onSubmitHandler",value:function(e,t,n){e.preventDefault(),this.isValidForm()&&(console.log(n),this.props.editList(t,n))}},{key:"isValidForm",value:function(){var e=!0,t="";return""===this.props.list.name&&(t="All input fields are required!",e=!1),t&&this.setState({error:t}),e}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement("h1",null,"Edit List"),r.a.createElement(Y,{name:this.props.list.name,onChange:this.props.onChange,onSubmit:function(t){return e.onSubmitHandler(t,e.props.id,e.props.list)},error:this.state.error})))}}]),t}(a.Component),X="MODE_READ",Z=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={mode:X,list:{name:""},error:""},n.onShowCreateHandler=n.onShowCreateHandler.bind(Object(S.a)(Object(S.a)(n))),n.onChangeInputHandler=n.onChangeInputHandler.bind(Object(S.a)(Object(S.a)(n))),n.onShowUpdateHandler=n.onShowUpdateHandler.bind(Object(S.a)(Object(S.a)(n))),n.onDeleteHandler=n.onDeleteHandler.bind(Object(S.a)(Object(S.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.remote!==_.FETCH_LISTS_SUCCESS&&this.props.fetchAll()}},{key:"componentWillReceiveProps",value:function(e){e.error?D.a.error(e.error):(e.remote===_.LIST_CREATED&&(D.a.success("New list added successfully!"),this.setState({mode:X})),e.remote===_.LIST_UPDATED&&(D.a.success("The list was successfully updated!"),this.setState({mode:X})))}},{key:"onChangeInputHandler",value:function(e){this.setState({list:Object(v.a)({},e.target.name,e.target.value)})}},{key:"onShowCreateHandler",value:function(e){this.setState({mode:"MODE_CREATE"})}},{key:"onShowUpdateHandler",value:function(e,t){this.setState({mode:"MODE_UPDATE",list:{name:t.name},id:t._id})}},{key:"onDeleteHandler",value:function(e){this.setState({mode:"MODE_DELETE"}),console.log("To be deleted")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Manage Lists"),this.state.mode===X&&r.a.createElement("div",null,r.a.createElement("button",{onClick:this.onShowCreateHandler},"Add List"),r.a.createElement("hr",null),r.a.createElement(z,{data:this.props.data,editHandler:this.onShowUpdateHandler,deleteHandler:this.onDeleteHandler})),this.state.mode!==X&&r.a.createElement("button",{onClick:function(){return e.setState({mode:X})}},"Back to All Lists"),"MODE_CREATE"===this.state.mode&&r.a.createElement(K,{createList:this.props.createList,list:this.state.list,onChange:this.onChangeInputHandler}),"MODE_UPDATE"===this.state.mode&&r.a.createElement($,{editList:this.props.editList,list:this.state.list,id:this.state.id,onChange:this.onChangeInputHandler}))}}]),t}(a.Component);var ee=Object(m.b)(function(e){return{data:e.list.data,remote:e.list.remote,error:e.list.error}},function(e){return{fetchAll:function(){return e(q())},createList:function(t){return e(B(t))},editList:function(t,n){return e(W(t,n))},deleteList:function(t){return e(J(t))}}})(Z),te=function(e){return r.a.createElement(h.e,null,r.a.createElement(f,{path:"/",exact:!0,component:b}),r.a.createElement(h.d,{path:"/about",component:g}),r.a.createElement(h.d,{path:"/users/login",component:R}),r.a.createElement(h.d,{path:"/users/register",component:G}),r.a.createElement(f,{path:"/users/logout",component:P}),r.a.createElement(f,{path:"/lists",component:ee}),r.a.createElement(f,{path:"/list/add",component:K}),r.a.createElement(f,{path:"/list/edit/:id",component:$}))},ne=function(e){return r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{exact:!0,className:"nav-link",activeClassName:"active",to:e.to},e.label))},ae=function(e){var t=e.menuItems.map(function(e,t){return r.a.createElement(ne,{key:t,label:e.label,to:e.to})});return r.a.createElement("ul",{className:"navbar-nav"},t)},re={MAIN_PUBLIC:[{label:"Login",to:"/users/login"},{label:"Register",to:"/users/register"}],MAIN_PRIVATE:[{label:"Home",to:"/"},{label:"Add Todo",to:"/todos/add"},{label:"Manage Lists",to:"/lists"},{label:"Logout",to:"/users/logout"}]},oe=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.loggedIn?re.MAIN_PRIVATE:re.MAIN_PUBLIC;return r.a.createElement("nav",{className:"navbar navbar-expand-sm bg-dark navbar-dark"},r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#collapsibleNavbar"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"collapsibleNavbar"},r.a.createElement(ae,{menuItems:e})))}}]),t}(a.Component),le=function(e){return r.a.createElement("header",null,r.a.createElement(oe,{loggedIn:e.loggedIn}))},ie=function(){return r.a.createElement("footer",null,r.a.createElement("p",null,"Copyright 2018 - Organizer App by Willbe.S"))},se=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.isAuthenticated()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(le,{loggedIn:this.props.loggedIn}),r.a.createElement("div",{className:"container margin-top-30"},r.a.createElement(te,null)),r.a.createElement(ie,null))}}]),t}(a.Component);var ce=Object(h.f)(Object(m.b)(function(e){return{loggedIn:e.auth.loggedIn}},function(e){return{isAuthenticated:function(){return e({type:_.AUTH_REQUEST})}}})(se));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue={auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.AUTH_REQUEST:return Object.assign({},e,{loggedIn:E.isUserAuthenticated(),error:!1});case _.LOGGIN_SUCCESS:return Object.assign({},e,{loggedIn:!0,error:!1});case _.LOGOUT_SUCCESS:return Object.assign({},e,{loggedIn:!1,error:!1});case _.AUTH_ERROR:return Object.assign({},e,{loggedIn:!1,error:t.message});default:return e}},list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{},remote:null,error:null},t=arguments.length>1?arguments[1]:void 0,n=null;switch(t.type){case _.LOGOUT_SUCCESS:return{data:{},remote:null,error:null};case _.LIST_CREATED:return(n=Object.assign({},e,{remote:_.LIST_CREATED,error:null})).data[t.data._id]=t.data,n;case _.LIST_UPDATED:return(n=Object.assign({},e,{remote:_.LIST_UPDATED,error:null})).data[t.data._id]=t.data,n;case _.LIST_DELETED:return a=(n=Object.assign({},e,{remote:_.LIST_DELETED,error:null})).data,r=t.id,a.hasOwnProperty(r)&&(!isNaN(parseInt(r))&&a instanceof Array?a.splice(r,1):delete a[r]),n;case _.FETCH_LISTS_SUCCESS:return Object.assign({},e,{data:function(e){var t={};return e.forEach(function(e){t[e._id]=e}),t}(t.data),remote:_.FETCH_LISTS_SUCCESS,error:null});case _.REMOTE_ERROR:return Object.assign({},e,{error:t.message});default:return e}var a,r}},de=n(17),me=n(34),he=n.n(me),pe=Object(de.d)(Object(de.c)(ue),Object(de.a)(he.a));pe.subscribe(function(){return console.log(pe.getState())}),l.a.render(r.a.createElement(m.a,{store:pe},r.a.createElement(h.a,null,r.a.createElement(ce,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,2,1]]]);
//# sourceMappingURL=main.6c00d114.chunk.js.map